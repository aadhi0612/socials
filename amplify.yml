version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "🚀 Starting Socials Frontend Build"
        - echo "Node version:" && node --version
        - echo "NPM version:" && npm --version
        - echo "Installing dependencies..."
        - npm ci
    build:
      commands:
        - echo "🎨 Building React application..."
        - npm run build
        - echo "✅ Frontend build completed"
        - echo "📁 Build output:"
        - ls -la dist/
        - echo "📄 Index.html check:"
        - ls -la dist/index.html
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
environment:
  variables:
    # Frontend Configuration
    VITE_NODE_ENV: production
    VITE_API_URL: https://socials.dataopslabs.com/api
    VITE_AWS_S3_BUCKET: socials-aws-1
    REACT_APP_AWS_REGION: us-east-2
    VITE_FRONTEND_URL: https://socials.dataopslabs.com
